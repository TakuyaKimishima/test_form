function FieldFormHandler(e,t,n){this.sortables=e,this.fieldSetCount=n,this.optionsShowing=!1,this.fieldPrefix=t,this.findNum=function(e){var t=e.id;if(null!=t){e=t.lastIndexOf("_");if(null!=e)return t.substr(e+1)}},this.isPreview=function(e){return 100<e.innerHTML.length},this.isField=function(e){var t=this.fieldPrefix+"_field_draggable_",n=this.findNum(e);return e.id&&e.id==t+n},this.isFieldSet=function(e){var t=this.findNum(e);return e.id&&e.id=="field_set_"+t},this.readyContents=function(e,t,n){return $(e).innerHTML.replace(/__NUM__/g,n).replace(/__NAME__/g,t)},this.convert=function(e,t){var n=this.findNum(e);return e.className=$(t+n).className,e.innerHTML=$(t+n).innerHTML,n},this.convertToText=function(e){this.findNum(e);this.convert(e,this.fieldPrefix+"_field_text_")},this.convertToPreview=function(e){this.convert(e,this.fieldPrefix+"_field_sample_")},this.createSortables=function(){for(var e=this.sortables,t=e.length-1;0<=t;t--)Sortable.create(e[t],{tag:"div",treeTag:"div",tree:!0,dropOnEmpty:!0,containment:e,only:["field","fieldset"],constraint:!1})},this.destroySortables=function(){for(var e=this.sortables,t=0;t<e.length;t++)Sortable.destroy(e[t])},this.addFieldSet=function(e){var t;null!=e&&""!=e&&(t=++this.fieldSetCount,new Insertion.Bottom(this.fieldPrefix+"_selected_fields_list",this.readyContents("sample_field_set",e,t)),this.destroySortables(),this.sortables.push("field_set_droppable_"+t),this.createSortables(),$("field_set_"+t).style.display="none",Effect.Appear("field_set_"+t),this.optionsShowing&&toggleDisplay("field_set_options_"+t))},this.updateFieldSetName=function(e,t){$("field_set_name_"+t).innerHTML=e},this.removeField=function(e){Element.remove(e),this.convertToText(e),new Insertion.Bottom(this.fieldPrefix+"_available_fields_list",e)},this.removeFieldSet=function(e){var t="field_set_droppable_"+this.findNum(e),n=$(t).childNodes;if(0<n.length)for(var a=n[0];null!=a;){var i=a.nextSibling;this.isField(a)?this.removeField(a):this.isFieldSet(a)&&this.removeFieldSet(a),a=i}for(var s=[],o=0;o<this.sortables.length;o++)this.sortables[o]!=t&&s.push(this.sortables[o]);this.sortables=s,Element.remove(e)},this.remove=function(e,t){"field"==e?this.removeField($(this.fieldPrefix+"_field_draggable_"+t)):"fieldset"==e&&this.removeFieldSet($("field_set_"+t))},this.showOptions=function(){this.optionsShowing=!this.optionsShowing,this.showOptionsRecurse(this.fieldPrefix+"_selected_fields_list")},this.showOptionsRecurse=function(e){for(var t=$(e).childNodes,n=0;n<t.length;n++){var a=this.findNum(t[n]),i=null;this.isField(t[n])?i="field_options_"+a:this.isFieldSet(t[n])&&(i="field_set_options_"+a,this.showOptionsRecurse("field_set_droppable_"+a)),null!=i&&toggleDisplay(i,this.optionsShowing)}},this.serializeList=function(e,t){for(var n=$(e).childNodes,a=0,i=0;i<n.length;i++){var s,o=this.findNum(n[i]),l=!1;this.isField(n[i])?l=!0:this.isFieldSet(n[i])&&(l=!0,s="sublist_"+o,this.serializeList("field_set_droppable_"+o,s),o=s),l&&(o='<input type="hidden" name="fields['+a+']" value="'+o+'"/>',new Insertion.Bottom(this.fieldPrefix+"_field_ordering_hidden_inputs",o),a++)}return a},this.serializeOrdering=function(){this.serializeList(this.fieldPrefix+"_selected_fields_list","root")},this.onStart=function(e,t,n){t.element.parentNode.id==this.fieldPrefix+"_available_fields_list"?t.setScrollOffsetElement(document.getElementById(this.fieldPrefix+"_available_fields_list")):t.setScrollOffsetElement(null)},this.onDrag=function(e,t,n){this.isField(t.element)&&(t.element.parentNode.id!=this.fieldPrefix+"_selected_fields_list"||this.isPreview(t.element)||this.convertToPreview(t.element),t.element.parentNode.id!=this.fieldPrefix+"_selected_fields_list"&&this.isPreview(t.element)&&this.convertToText(t.element))},this.onEnd=function(e,t,n){var a,i=t.element.parentNode.id;this.isField(t.element)?i==this.fieldPrefix+"_available_fields_list"?this.convertToText(t.element):(i.startsWith(this.fieldPrefix+"_selected")||i.startsWith("field_set"))&&(a=this.findNum(t.element),toggleDisplay("field_options_"+a,this.optionsShowing)):this.isFieldSet(t.element)&&i==this.fieldPrefix+"_available_fields_list"&&this.removeFieldSet(t.element)}}var hideAllMenusTimeout,indicatorShow=!1,observingPopupElements=[],activeAjaxRequests=[],hiddenPotato=!0;function displayIndicator(){$j("#indicator").show()}function fadeOutIndicator(){$j("#indicator").fadeOut()}function hideIndicator(){$j("#indicator").hide()}function showGlobalSearchLoading(){var e=$j("#global-search-loading-template").html();$j("#global-search-results").html(e).dropdown("toggle")}function toggleModule(e,t){toggleModuleHelper($j("#"+e),e,t)}function toggleModuleHelper(e,t,n){e&&(e.is(":hidden")?(togglePlusIcon(n,!1),setShowDisplayCookie(t,"true")):(togglePlusIcon(n,!0),setShowDisplayCookie(t,"false")),e.slideToggle(400,"easeInOutCubic"))}function toggleModuleCancellableAjax(e,t,n,a){var i,s,o=document.getElementById(e);o&&(i=document.getElementById(t),s=document.getElementById(a),"none"===o.style.display?(t=0===o.childElementCount,s&&t&&(s.disabled=!0),togglePlusIcon(i,!1),setShowDisplayCookie(e,"true"),t&&n(completeToggleModuleAjax.bind(this,a))):(cancelAllPendingAjax(),s&&(s.disabled=!1),togglePlusIcon(i,!0),setShowDisplayCookie(e,"false")),$j(o).slideToggle(400,"easeInOutCubic"))}function completeToggleModuleAjax(e){e=document.getElementById(e);e&&(e.disabled=!1)}function setShowDisplayCookie(e,t){Cookies.set("showDisplay_"+e,t,{expires:2592e3})}function togglePlusIcon(e,t){$j(e).length&&(t?$j(e).addClass("icon-plus").removeClass("icon-minus"):$j(e).addClass("icon-minus").removeClass("icon-plus"))}function toggleElement(e){e=$j("#"+e);e&&e.slideToggle(400,"easeInOutCubic")}function toggleModuleByClass(e,t){toggleModuleHelper($j("."+e),e,t)}function toggleDisplay(e){toggleDisplay(e,!0)}function toggleDisplayAnimated(e,t,n,a,i){null==n&&(n=400);i={duration:n,easing:"easeInOutCubic",complete:i};null==a?null==t?$j("#"+e).slideToggle(i):t?$j("#"+e).slideDown(i):$j("#"+e).slideUp(i):null==t?$j("#"+e).fadeToggle(i):t?$j("#"+e).fadeIn(i):$j("#"+e).fadeOut(i)}function allowSave(){$j("a.pi-mce-savebutton").removeClass("mceButtonDisabled")}function autoSave(t){try{var e=$j("#wizard_form"),n=e.attr("action");e.triggerHandler("submit"),$j.ajax({url:n+"/sv/true",type:"POST",data:e.serialize(),success:function(e){$j(".autosave-message").text("Last saved at: "+("en-US"===localeId?prettyTime:japanTime)(new Date)),$j("a.pi-mce-savebutton").addClass("mceButtonDisabled"),void 0!==t&&t()}})}catch(e){window.console&&window.console.log("Autosave error: "+e)}}function toggleDisplay(e,t){var n=document.getElementById(e);if(n)if("none"===n.style.display&&!1!==t)if("TR"===n.tagName)try{n.style.display="table-row"}catch(e){n.style.display="block"}else!("SPAN"===n.tagName&&"description"===n.className||"SPAN"!==n.tagName&&"INPUT"!==n.tagName)?n.style.display="inline":n.style.display="block";else!0!==t&&(n.style.display="none")}function collapseNavModules(e){for(var t,n=["nav_marketing","nav_prospect","nav_report","nav_administration","nav_superroot"],a=0;a<n.length;a++)n[a]!==e&&(t=document.getElementById(n[a]))&&(t.style.display="none",Cookies.set("showDisplay_"+n[a],"false",{expires:2592e3}))}function registerSetFocus(e){!(e=e?document.getElementById(e):document.getElementById("center-stage"))||(e=e.getElementsByTagName("INPUT")[0])&&"text"===e.type&&"none"!==e.parentNode.style.display&&e.focus()}function addPeriodicalExecutor(e){void 0===document.periodicalExecuters&&(document.periodicalExecuters=[]),document.periodicalExecuters.push(e)}function stopPeriodicalExecutors(){if(void 0!==document.periodicalExecuters)for(var e=0;e<document.periodicalExecuters.length;e++)document.periodicalExecuters[e].stop()}function highlightStars(e,t,n){for(var a=1;a<=t;a++)n?Element.addClassName($("rating_"+e+"_"+a),"ratehover"):Element.removeClassName($("rating_"+e+"_"+a),"ratehover")}function insertTextAtCursor(e,t){var n,a=document.getElementById(e);document.selection?(a.focus(),document.selection.createRange().text=t):0<=parseInt(a.selectionStart)?(n=a.selectionStart,e=a.selectionEnd,a.value=a.value.substring(0,n)+t+a.value.substring(e,a.value.length)):a.value+=t}function ckeditorLoadEditor(e,t,n){ckeditorRemoveEditor(e,t,n)}function ckeditorRemoveEditor(e,t,n){CKEDITOR.instances[e];t?(t="/js/ckeditor/"+t,n=_.extend({customConfig:t},n),CKEDITOR.replace(e,n)):CKEDITOR.replace(e)}function ckeditorSave(){if("undefined"!=typeof CKEDITOR){for(var e in CKEDITOR.instances)CKEDITOR.instances.hasOwnProperty(e)&&CKEDITOR.instances[e].updateElement();return!0}}function ckeditorInsertText(e,t){CKEDITOR.instances.editor1.insertText(t)}function prepareAjaxForm(e){registerSetFocus(e)}function ajaxPagerGetTotalChecked(e){return jQuery("#"+e+" input.datatable-checkbox:checked").length}function confirmBatchAction(e,t){var n=ajaxPagerGetTotalChecked(e),a=!1,i=$j.Event("keypress");if(i.which=13,i.keyCode=13,$j(".ui-autocomplete-input").each(function(){var e=$j(this);e.val()!==e.attr("data-default")&&""!==e.val()&&e.trigger(i)}),0!==n){var s=jQuery("#"+e);0<s.find("input.check_all_selected").val()&&(n=s.find("input.check_all_num_results").val(),"noPager"===s.find("table").attr("data-table-type")&&(a=!0));e=s.find("select.multi-select"),s={multiAddList:s.find("select.multi-list-add option:selected").text(),multiRemoveList:s.find("select.multi-list-remove option:selected").text(),multiAssignUser:s.find("select.multi-user-assign option:selected").text(),multiAssignGroup:s.find("select.multi-group-assign option:selected").text()},s=generateSelectedBatchActionMessage(jQuery(e).val(),t,n,s,a);return"string"==typeof s?confirm(s):s}s=i18n.t("Alert.Select.One.Or.More.Records");alert(s)}function generateSelectedBatchActionMessage(e,t,n,a,i){var s="";switch(e){case"deletes":s=getSelectedMessage("Batch.Action.Message.Delete",{number:n},i);break;case"undelete":s=getSelectedMessage("Batch.Action.Message.Undelete",{number:n},i);break;case"pause":s=getSelectedMessage("Batch.Action.Message.Pause",{number:n},i);break;case"permanentlyDelete":s=$j("#permanently_delete_confirm").is(":checked");break;case"hide":s=getSelectedMessage("Batch.Action.Message.Hide",{number:n},i);break;case"unhide":s=getSelectedMessage("Batch.Action.Message.Unhide",{number:n},i);break;case"multiReviewed":s=getSelectedMessage("Batch.Action.Message.Mark.As.Reviewed",{number:n},i);break;case"multiAddList":s=getSelectedMessage("Batch.Action.Message.Add.To.List",{number:n,objectName:a.multiAddList},i);break;case"multiRemoveList":s=getSelectedMessage("Batch.Action.Message.Remove.From.List",{number:n,objectName:a.multiRemoveList},i);break;case"multiRemoveSpecificList":s=getSelectedMessage("Batch.Action.Message.Remove.From.This.List",{number:n},i);break;case"multiAssignUser":s=getSelectedMessage("Batch.Action.Message.Assign.To.User",{number:n,objectName:" "===a.multiAssignUser?"null (unassign)":a.multiAssignUser},i);break;case"multiAssignGroup":s=getSelectedMessage("Batch.Action.Message.Assign.To.Group",{number:n,objectName:a.multiAssignGroup},i);break;case"multiAddTags":s=getSelectedMessage("Batch.Action.Message.Add.Tags.To",{number:n},i);break;case"multiEnableEmailTemplate":s=getSelectedMessage("Batch.Action.Message.Enable.Use",{number:n},i);break;case"multiDisableEmailTemplate":s=getSelectedMessage("Batch.Action.Message.Disable.Use.For",{number:n},i);break;case"multiRemoveTags":s=getSelectedMessage("Batch.Action.Message.Remove.Tags.From",{number:n},i);break;case"multiRemoveSpecificTag":s=getSelectedMessage("Batch.Action.Message.Remove.Tags.From.Specific",{number:n},i);break;case"multiMerge":s=!0,n<2?(alert(i18n.t("Batch.Action.Message.Merge.Must.Select")),s=!1):3<n&&(alert(i18n.t("Batch.Action.Message.Merge.Only.Select")),s=!1);break;case"reset":s=getSelectedMessage("Batch.Action.Message.Reset",{number:n},i);break;case"multiSendActivationEmail":s=getSelectedMessage("Batch.Action.Message.Resend.Activation.Emails",{number:n},i);break;case"multiAddConnectorSSO":s=getSelectedMessage("Batch.Action.Message.Enable.CRM.SSO",{number:n},i);break;case"multiAllowChatAccess":s=getSelectedMessage("Batch.Action.Message.Multi.Allow.Chat.Access",{number:n},i);break;case"multiDisallowChatAccess":s=getSelectedMessage("Batch.Action.Message.Multi.Disallow.Chat.Access",{number:n},i);break;case"multiAddToFolder":s=getSelectedMessage("Batch.Action.Message.Multi.Add.To.Folder",{number:n},i);break;case"multiUserRole":s=getSelectedMessage("Batch.Action.Message.Multi.User.Role",{number:n},i);break;case"multiChangeEmail":s=getSelectedMessage("Batch.Action.Message.Multi.Change.Email",{number:n},i);break;case"multiUserProspectCreateAndAddToList":s=getSelectedMessage("Batch.Action.Message.Multi.User.Prospect.Create.And.Add.To.List",{number:n},i);break;case"multiUserPreference":s=getSelectedMessage("Batch.Action.Message.Multi.User.Preference",{number:n},i);break;case"multiStarProspects":s=getSelectedMessage("Batch.Action.Message.Multi.Star.Prospects",{number:n},i);break;case"multiUnStarProspects":s=getSelectedMessage("Batch.Action.Message.Multi.Unstar.Prospects",{number:n},i);break;case"multiAddUsersToGroup":s=getSelectedMessage("Batch.Action.Message.Multi.Add.Users.To.Group",{number:n},i);break;case"multiConvertSsoUsersToSynced":s=getSelectedMessage("Batch.Action.Message.Multi.Convert.SSO.Users.To.Synced",{number:n},i);break;case"multiRequeueProspects":s=getSelectedMessage("Batch.Action.Message.Multi.Requeue.Prospects",{number:n},i);break;case"multiClearFids":s=getSelectedMessage("Batch.Action.Message.Multi.Clear.Fids",{number:n},i);break;case"cancel":case"cancelOnly":s=getSelectedMessage("Batch.Action.Message.Multi.Cancel",{number:n},i);break;case"multiUserLanguage":s=getSelectedMessage("Batch.Action.Message.Multi.User.Language",{number:n},i);break;case"multiUserLocale":s=getSelectedMessage("Batch.Action.Message.Multi.User.Locale",{number:n},i);break;case"multiToggleCredentialLogging":s=getSelectedMessage("Batch.Action.Confirmation.User.Toggle.Credential.Logging",{number:n},i);break;case"enableAnalyticsSync":s=getSelectedMessage("Custom.Field.Analytics.Include.Confirm",{number:n},i);break;case"disableAnalyticsSync":s=getSelectedMessage("Custom.Field.Analytics.Exclude.Confirm",{number:n},i);break;case"multiResync":s=getSelectedMessage("Batch.Action.Message.Multi.Requeue.Prospects",{number:n},i);break;default:alert(i18n.t("Batch.Action.Message.Multi.Default")),s=!1}return s}function getSelectedMessage(e,t,n){var a;return n&&(n=e+".Unknown.Selection.Count",(a=i18n.t(n,t))!==n)?a:i18n.t(e,t)}function confirmSetSortOrder(){var n="";return $j("span[id^=draggable]")&&$j("span[id^=draggable]").each(function(e,t){n&&(n+=","),n+=t.id.substr(9)}),n?($j("#sortOrder").val(n),confirm(i18n.t("Message.Confirm.Sort.Order"))):(alert(i18n.t("Message.Sort.Order.Alert")),!1)}function toggleCustomInput(e){var t=$(e.id.replace("_selector",""));"-custom-"===e.options[e.selectedIndex].value?t.style.display="inline":t.style.display="none"}function convertToId(e,t){var n="";return 0===t.value.length&&0<e.length&&("_"!==(n=e.replace(/\s/g,"_").replace(/^(\d+)/,"Custom_$1").replace(/[^A-Za-z0-9_]/g,"_").replace(/_+$/,"").replace(/_{2,}/g,"_").replace(/^(_+)/,"Custom$1"))&&""!==n||(n="CustomObject".concat(Math.floor(1e5*Math.random()+1)+(new Date).getTime())),t.value=n),!0}function countLines(e,t){for(var n=1,a=0;n++,-1!==(a=e.indexOf("\n",a+1)););t=Math.round(e.length/(t-1));return Math.max(n,t)}function resizeTextarea(e){var t,n=document.getElementById(e);n&&(t=countLines(n.value,n.cols)+1,n.offsetHeight<15*t&&(n.style.height=15*t+"px")),setTimeout("resizeTextarea('"+e+"');",300)}function cancelFormClearInnerHTML(e){e=document.getElementById(e);e&&("TR"!==e.tagName&&"tr"!==e.tagName||!e.firstChild?e.innerHTML="":e.firstChild.innerHTML="")}function showWizardPagerDiv(t,n){var e;"block"!==$(t).style.display&&(n&&((e=Position.cumulativeOffset(n))[0]+230>Element.getWidth(document.body)&&(e[0]=Element.getWidth(document.body)-230),$(t).style.left=e[0]+"px"),Effect.Appear(t,{duration:1}),-1===observingPopupElements.indexOf(t)&&(observingPopupElements.push(t),Event.observe(document.body,"click",function(e){e=Event.element(e);e.id!==n.id&&(Element.descendantOf(e,$(t))||($(t).style.display="none"))}.bind(t))))}function disablePreviewForm(e){for(var t=window.frames[e].document.getElementsByTagName("input"),n=0;n<t.length;n++)"SUBMIT"!==t[n].type.toUpperCase()&&"BUTTON"!==t[n].type.toUpperCase()||(t[n].setAttribute("disabled","true"),t[n].disabled="true");for(t=window.frames[e].document.getElementsByTagName("a"),n=0;n<t.length;n++)t[n].setAttribute("href","#"),t[n].href="#"}function wizardSubmitAndJump(e,t){ckeditorSave();var n=$j("#skip_to_step_id"),a=$j("#wizard_form");a.length&&(n.length||(window.location=t),n.val(e),a.trigger("submit"))}function php_serialize(e){var t="";if("object"==typeof e){t="a:";var n,a="",i=0;for(n in e)e.hasOwnProperty(n)&&(a+=php_serialize(n),a+=php_serialize(e[n]),i++);t+=i+":{",t+=a,t+="}"}else switch(typeof e){case"number":e-Math.floor(e)!=0?t+="d:"+e+";":t+="i:"+e+";";break;case"string":t+="s:"+(e=standardizeNewLines(e)).length+':"'+e+'";';break;case"boolean":t+=e?"b:1;":"b:0;"}return t}function standardizeNewLines(e){for(var t="\r\n",n=/[^\r]\n/g,a=e.search(n);-1<a;)a=(e=e.slice(0,a+1)+t+e.substr(a+2)).search(n);return e=(e=(e=e.replace(/\r(?!\n)/g,t)).replace(/^\n/g,t)).replace(/\r$/g,t)}function addCommas(e){for(var e=(e+="").split("."),t=e[0],e=1<e.length?"."+e[1]:"",n=/(\d+)(\d{3})/;n.test(t);)t=t.replace(n,"$1,$2");return t+e}function addNewArrayElement(e,t,n,a){Element.extend(e),Element.extend(t);t=cloneAndAppendElement(e,t);return setArrayIndexForDescendants(t,n,a),t}function addOptionToPeerDropdowns(o,e,t,n){var a;Element.extend(o),Element.extend(e),(null===n||n)&&""===o.value||(a=o.parentNode,Element.extend(a),n=a.className,a.className="",e.getElementsBySelector("select."+n).each(function(e,t){var n=new Option;n.value=o.value,n.text=o.text;for(var a=e.options,i=!0,s=0;s<a.length;s++){if(a[s].text===n.text){i=!1;break}if(""!==a[s].value&&a[s].text>n.text){try{e.add(n,a[s])}catch(e){a.add(n,s)}i=!1;break}}if(i)try{e.add(n,null)}catch(e){a.add(n)}}),a.className=n)}function cloneAndAppendElement(e,t){Element.extend(e),Element.extend(t);e=e.cloneNode(!0);return e.removeAttribute("id"),e.descendants().each(function(e,t){e.removeAttribute("id")}),e.show(),t.parentNode.insertBefore(e,t),e}function cloneAndReplaceElement(e,t){Element.extend(e),Element.extend(t);e=cloneAndAppendElement(e,t);return Element.remove(t),e}function dropdownElementEmpty(e,t){Element.extend(e);t=null===t||t?1:0;return e.options.length===t}function getSelectedOption(e){e=e.options[e.selectedIndex];return Element.extend(e),e}function inArray(e,t){for(var n=0;n<e.length;n++)if(e[n]===t)return!0;return!1}function removeOptionFromPeerDropdowns(a,e,i,t){var n;Element.extend(a),Element.extend(e),(null===t||t)&&""===a.value||(t=(n=a.parentNode).className,n.className="",e.getElementsBySelector("select."+t).each(function(e,t){if(Element.extend(e),null!==i&&e.id===i||e.value!==a.value){t=null;for(var n=0;n<e.options.length;n++)if(e.options[n].value===a.value){t=n;break}null!==t&&e.remove(t)}}),n.className=t)}function setArrayIndexForDescendants(e,i,s){Element.extend(e),e.descendants().each(function(e,t){var n,a=e.name;void 0===a||0<(n=a.indexOf(s))&&(e.name=a.substr(0,n)+"["+i+"]"+a.substr(n+s.length))})}function cancelAllPendingAjax(){activeAjaxRequests.each(function(e){e.transport.abort()}),activeAjaxRequests=[]}function setupAsmSelect(){"string"!=typeof objectName&&(objectName="list");var e=objectName[0].toUpperCase()+objectName.substr(1);jQuery(".asmSelect").each(function(){-1===this.parentNode.className.indexOf("asmContainer")&&jQuery(this).asmSelect({animate:!0,addItemTarget:"top",highlight:!0,countNotice:!0,countSuffix:objectName+"(s) selected",countLabel:"No "+e+" selected",disabledItemClass:"asmListOptOut"})}),ieSelectBoxInit()}function setupAsmSelectMerge(){jQuery(".asmSelect").asmSelect({animate:!0,addItemTarget:"top",highlight:!0,countLabel:"No Lists selected",disabledItemClass:"asmListOptOut"}),jQuery(".asmSelect").prop("disabled",!0),jQuery(".asmSelect").css("width","200px"),jQuery(".asmListItemRemove").css("display","none")}function hideAllActionMenus(){$j("td.new-actions .actions-menu-wrapper .actions-menu").hide(),clearTimeout(hideAllMenusTimeout)}function ieSelectBoxInit(){var e;$j("html").is(".lt-ie9")&&$j("select:not('.input-auto, .no-resize')").each(function(){(e=$j(this)).data("origWidth",e.outerWidth())}).mouseenter(function(){$j(this).css("width","auto")}).bind("blur change",function(){(e=$j(this)).css("width",e.data("origWidth"))})}function archiveDatePicker(e){$j(e).datepicker({format:"yyyy-mm-dd",language:languageId.slice(0,2)}).on("changeDate",function(){$j("div.datepicker").hide()})}function updateRelationRule(e,t,n,a){a="#"+(n+a).toString();e===t?$j(a).parent().parent().parent().removeClass("automation-rule").addClass("rule-group-actions relation-group-wrapper"):$j(a).hasClass("automation-rule")||$j(a).removeClass("rule-group-actions").removeClass("relation-group-wrapper").addClass("automation-rule")}function focusElement(e){"string"==typeof e&&(0!==e.indexOf("#")&&(e="#"+e),$j(e).focus())}function createNewSplit(e){var t,n,a=findSplitContainer(e);canAddNewSplit(a)?(n=a.find("div.splits").first(),(t=a.parent().find("div.split-template").clone(!0).removeClass("split-template")).appendTo(n),e=incrementSplitCount(a,1),n=a.find("input.list-name").val(),t.find("input.split-name").val(n+"_split"+e),calculateSplitCount(a)):alert("Unable to split list further!")}function canAddNewSplit(e){var t=e.find("input.split-evenly-check").prop("checked"),n=parseInt(e.find("input.total-count").val()),e=parseInt(e.find("input.total-splits").val());return!t||1!==Math.floor(n/(e+1))}function addSplit(e,t,n,a){var i=e.find("div.splits").first(),s=e.parent().find("div.split-template").clone(!0).removeClass("split-template");s.find("input.split-name").val(t),s.find("input.split-percent").val(n),s.appendTo(i),a&&(s.addClass("error alert alert-error"),s.find(".controls").append('<span class="help-inline">'+a+"</span>"));incrementSplitCount(e,1);calculateSplitCount(e)}function updateSplitCount(e){calculateSplitCount(findSplitContainer(e))}function calculateSplitCount(e){var t=parseInt(e.find("input.total-count").val()),n=parseInt(e.find("input.total-splits").val()),a=e.find("input.split-evenly-check").prop("checked");if(0!==n)if(a){for(var i=Math.floor(t/n),s=Math.floor(1/n*100),o=t,l=0;l<n;l++)l+1===n&&i<o&&(i=o),e.find("span.split-count:eq("+l+")").html("("+i+" prospects)"),e.find("input.split-percent:eq("+l+")").val(s),o-=i;e.find("span.total-percent").html("100"),e.find("span.total-percent").css("color","green")}else{var r=0;for(l=0;l<n;l++)s=parseInt(e.find("input.split-percent:eq("+l+")").val()),isNaN(s)?e.find("input.split-percent:eq("+l+")").val(0):r+=s;if(e.find("span.total-percent").html(r),100!==r){for(l=0;l<n;l++)e.find("span.split-count:eq("+l+")").html("");e.find("span.total-percent").css("color","red")}else{for(o=t,l=0;l<n;l++){s=.01*parseInt(e.find("input.split-percent:eq("+l+")").val());var c=Math.round(t*s);o<c&&(c=o),e.find("span.split-count:eq("+l+")").html("("+c+" prospects)"),o-=c}e.find("span.total-percent").css("color","green")}}}function findSplitContainer(e){return jQuery(e).parents("form.form").first()}function toggleSplitEvenly(e){var t=findSplitContainer(e);!0===jQuery(e).prop("checked")?t.parent().find("input.split-percent").prop("disabled",!0):t.parent().find("input.split-percent").prop("disabled",!1),calculateSplitCount(t)}function incrementSplitCount(e,t){t=parseInt(e.find(".total-splits").val())+t;return t<0&&(t=0),e.find(".total-splits").val(t),t}function removeSplit(e){var t=findSplitContainer(e);parseInt(t.find(".total-splits").val())<=2?alert("You must have atleast two splits."):(jQuery(e).parent().parent().remove(),incrementSplitCount(t,-1),calculateSplitCount(t))}function validateSplitSubmit(e){var t=parseInt(e.find(".total-splits").val());if(t<2)return alert("Please create at least two splits"),!1;var n=[];if(e.find("input.split-evenly-check").is(":checked"))for(i=0;i<t;i++)o=e.find("input.split-name:eq("+i+")").val(),n.push(o);else{for(var a=0,i=0;i<t;i++){var s=parseInt(e.find("input.split-percent:eq("+i+")").val()),o=e.find("input.split-name:eq("+i+")").val();if(isNaN(s))return alert("Split #"+(i+1)+" '"+o+"' has an invalid percentage"),!1;if(0===s)return alert("Split #"+(i+1)+" '"+o+"' must have a percentage greater than 0"),!1;a+=s,n.push(o)}if(100!==a)return alert("The total must add up to 100%"),!1}for(i=0;i<n.length;i++)for(var l=0;l<n.length;l++)if(l!==i&&n[i]===n[l])return alert("Splits #"+i+" and #"+l+" must have unique names"),!1;return!0}function prettyTime(e){if(!e)return"";var t="",n=e.getHours(),t=n<12?"AM":"PM";0===n&&(n=12),12<n&&(n-=12);e=e.getMinutes();return 1===(e+="").length&&(e="0"+e),n+":"+e+" "+t}function japanTime(e){var t=e.getHours(),e=e.getMinutes();return 1===e.length&&(e="0"+e),t+":"+e}function splitSubmitForum(e){e=findSplitContainer(e);return validateSplitSubmit(e)&&e.submit(),!1}function highlightMergeColumn(e,t,n){var a=jQuery(e).closest("table"),i=a.find("td.mergeColumn"+t),s=a.find("td.mergeColumn"+t+"even");i&&(i.addClass("highlight"),s.addClass("highlightEven"));for(var o=0;o<n;o++)o!==t&&(i=a.find("td.mergeColumn"+o),s=a.find("td.mergeColumn"+o+"even"),i&&(i.removeClass("highlight"),s.removeClass("highlightEven")))}function updateSeparators(){$j(".automation-separator").show().removeClass("match1").removeClass("match2"),$j(".automation-rule-operator").each(function(){var e=$j(".match-all input",this),t=$j(".match-any input",this),n=$j(this).siblings(".automation-separator"),a=1;e.prop("checked")?a=parseInt(e.val()):t.prop("checked")&&(a=parseInt(t.val()));a=1===a?i18n.t("Automation.Separator.And"):i18n.t("Automation.Separator.Or");n.empty().prepend(a)}),$j(".automation-separator").next().is(".automation-separator")&&$j(".automation-separator").each(function(){$j(this).next().is(".automation-separator")&&$j(this).insertBefore($j(this).prev())}),$j(".automation-rule-operator").each(function(){$j(this).siblings(".automation-separator:last").hide()})}function draggableHelper(e,t){var n=t.children(),t=t.clone();return t.children().each(function(e){$j(this).width(n.eq(e).width())}),t}function addslashes(e){return(e+"").replace(/[\\"']/g,"\\$&")}function html_entities(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}function textTinyResize(){var e=$j(this),t=e.val();t<10?e.width(18):t<100?e.width(28):e.width(38)}function initDatepicker(){$j(document).on("focus","input.datepicker",function(){$j("input.datepicker").datepicker({format:"yyyy-mm-dd",language:languageId.slice(0,2)}),$j("input.datepicker").not($j(this)).datepicker("hide")}),$j(".date-filter input.date.start").datepicker({dateFormat:"yy-mm-dd",changeMonth:!0,changeYear:!0,maxDate:$j(".date-filter input.date.end").val(),onSelect:function(e){$j(this).closest(".date-filter").find("input.date.end").datepicker("option","minDate",e)}}),$j(".date-filter input.date.end").datepicker({dateFormat:"yy-mm-dd",changeMonth:!0,changeYear:!0,minDate:$j(".date-filter input.date.start").val(),maxDate:"0",onSelect:function(e){$j(this).closest(".date-filter").find("input.date.start").datepicker("option","maxDate",e)}})}function checkPasswordErrors(e,t){var n=$j(e),e=$j(t),t=!0;return(n.hasClass("error")||n.hasClass("warning")||e.hasClass("error")||e.hasClass("warning"))&&(t=!1),t}function setPasswordErrors(e){$j(e).passwordValidator("setErrors")}function scrollToError(e){e=$j(e);$j("html,body").animate({scrollTop:e.offset().top-60},"fast")}function passwordToggle(){var e=$j("#password"),t=e.val(),n=e.attr("class"),a=e.parent(),i=$j('<input type="text" name="password" id="password" autocomplete="off" class="'+n+'">'),n=$j('<input type="password" name="password" id="password" autocomplete="off" class="'+n+'">');return"password"===e.attr("type")?(i.val(t),e.remove(),a.prepend(i)):(n.val(t),e.remove(),a.prepend(n)),!1}function substr_replace(e,t,n,a){return e.substr(0,n)+t+e.substr(n+a)}$j(function(){$j("#global-search-form input").on("keydown",function(e){if(40===e.keyCode)return $j("#global-search-results a").first().focus(),!1}),$j("#global-search-results").on("keydown","a",function(e){if(38===e.keyCode&&$j(this).closest("li").is(":first-child"))return $j("#global-search-form input").focus(),!1}),$j("#global-search-results").on("click","a",function(e){e.stopPropagation()}),new Clipboard("#account-link-copy",{text:function(e){return $j("#account-link-tooltip").hide().stop(!0,!0).fadeIn(250).delay(3e3).fadeOut(250),e.getAttribute("data-clipboard-text")+window.location.hash}})}),$j(function(){$j(document).on("change",'select[name*="rule_operator"]',function(){var e=$j(this),t=parseInt(e.val()),n="",a=(n=-1!==e.attr("id").indexOf("rule_group_rule_operator")?e.attr("id").replace("rule_group_rule_operator","rule_group_rule_value"):e.attr("id").replace("rule_operator","rule_value"))+"_selector",e=$j("#"+n),n=$j("#"+a),a=e.siblings(".between-values");e.hide(),n.hide(),a.hide(),21===t?a.css("display","inline"):(a.children().val(""),-1!==$j.inArray(t,[1,2,5,6,12,13])?e.show():n.length?(n.show(),n[0].selectedIndex=0):(e.val(""),e.show()))})}),$j(function(){$j(".customObjectToggle").hover(function(){$j(this).hasClass("text-success")||$j(this).addClass("icon-ok-circle").removeClass("icon-circle-blank")},function(){$j(this).hasClass("text-success")||$j(this).addClass("icon-circle-blank").removeClass("icon-ok-circle")})}),$j(function(){$j(".module table.data-table tr td:last-child").addClass("last"),$j(".module table.data-table tr th:last-child").addClass("last"),$j("html").is(".lt-ie8")&&$j("#ieCompatibility").show(),$j("#content").tooltip({selector:"[data-toggle=tooltip]"}),$j(document).on("checkboxchange","table.data-table",function(){var e=$j(this).find("input.datatable-checkbox"),t=e.filter(":checked"),n=e.length,e=t.length;$j(this).next(".table-foot").find("span.checkbox-num-selected").html(e),$j("#check_all_selected").val(0),n===e?$j(this).find("input.check-all").prop("checked",!0):$j(this).find("input.check-all").prop("checked",!1),$j(this).find("input.check_all_num_results").length&&$j(this).closest("table").trigger("show_check_all_message",[n===e]),0===e?$j(this).find("p.multi-checkbox-buttons :button").prop("disabled",!0):$j(this).find("p.multi-checkbox-buttons :button").prop("disabled",!1);t=$j.map(t,function(e){return $j(e).val()});$j(this).next(".table-foot").find("input.multiCheckIds").val(t.join(","))}),$j(document).on("show_check_all_message","table.data-table",function(e,t){var n,a,i=$j(this).closest("table"),s=i.find("input.datatable-checkbox");t?(a=i.find("input.check_all_num_results").val(),i.find("input.check_all_num_results_int").val()>s.size()&&(n=i.find("tr td").length,t='<a href=\'javascript:;\' onClick=\'$j(this).closest("table").trigger("display_all_checked_message", ["'+a+"\"])'>",s=s.size(),a="noPager"===i.attr("data-table-type")?i18n.t("Table.Select.All.Page.Unknown.Selection.Count",{number:s,linkStart:t,linkEnd:"</a>"}):i18n.t("Table.Select.All.Page",{number:s,linkStart:t,totalNumber:a,linkEnd:"</a>"}),i.find("tr:first").after('<tr><td class="check-all-message" colspan="'+n+'" style="text-align:center">'+a+"</td></tr>"))):(i.find("td.check-all-message").parent().remove(),i.find("td.all-checked-message").parent().remove())}),$j(document).on("display_all_checked_message","table.data-table",function(e,t){var n=$j(this).closest("table");n.find("td.check-all-message").remove();var a,i=n.find("tr td").length,s="<a href='javascript:;' onClick='$j(this).closest(\"table\").trigger(\"clear_check_all\")'>";"noPager"===n.attr("data-table-type")?(a=i18n.t("Table.Select.All.Clear.Unknown.Selection.Count",{linkStart:s,linkEnd:"</a>"}),t=i18n.t("Label.Content.All").toLowerCase()):a=i18n.t("Table.Select.All.Clear",{number:t,linkStart:s,linkEnd:"</a>"}),n.find("tr:first").after('<tr><td class="all-checked-message" colspan="'+i+'" style="text-align:center">'+a+"</td></tr>"),n.next(".table-foot").find("span.checkbox-num-selected").html(t),n.next(".table-foot").find("input.check_all_selected").val(1)}),$j(document).on("clear_check_all","table.data-table",function(){var e=$j(this).closest("table").find("input.check-all");e.prop("checked")&&e.click(),$j("#check_all_selected").val(0)}),$j(document).on("click","input.check-all",function(){var e=$j(this).closest("table"),t=e.find("input.datatable-checkbox");$j(this).prop("checked")?t.prop("checked",!0):t.prop("checked",!1),e.trigger("checkboxchange")}),$j(document).on("click","input.datatable-checkbox",function(){$j(this).closest("table").trigger("checkboxchange")}),$j(document).on("click","a.toggle-crm-task-info",function(e){e.preventDefault();e="div.crm-task-info, div.action-crm-task-form";$j(this).next(e).is(":visible")?($j(this).next(e).slideToggle("slow"),$j(this).text("Show Task Configuration")):($j(this).next(e).slideToggle("slow"),$j(this).text("Hide Task Configuration"))}),$j.waypoints.settings.scrollThrottle=30,$j(".ajaxFancybox").length&&$j(".ajaxFancybox").fancybox({width:"100%",height:"100%",type:"iframe",autoDimensions:!1}),$j("#indicator").spin({top:"9px",left:"9px",color:"#fff",width:4}),indicatorShow&&$j("#indicator").show();var e={over:function(){$j(this).addClass("submenu-on")},timeout:100,out:function(){$j(this).removeClass("submenu-on")}};$j("li.dropdown-submenu").hoverIntent(e),$j("#admin-drawer-toggle").click(function(){$j("#admin-drawer.open").length?($j("#wrap, #global-header-wrapper header").animate({"margin-left":0},"fast","easeInOutExpo"),$j("#admin-drawer").animate({left:"-250px"},"fast","easeInOutExpo",function(){$j("#admin-drawer").removeClass("open").css("left","-250px")})):($j("#admin-drawer").animate({left:0},"fast","easeInOutExpo"),$j("#wrap, #global-header-wrapper header").animate({"margin-left":250},"fast","easeInOutExpo"),$j("#admin-drawer").addClass("open"))}).tooltip(),ieSelectBoxInit();var n=!1,a=!1,i=!1;$j(document).bind("keydown",function(e){if((this===e.target||!/textarea|select/i.test(e.target.nodeName)&&"text"!==e.target.type&&"password"!==e.target.type&&"true"!==$j(e.target).prop("contenteditable"))&&!a){var t=e.keyCode||e.which;if(192===t&&$j("#dropdown_agency_account_id_chzn").length)return $j("#dropdown_agency_account_id_chzn a").trigger("mousedown"),!1;if(65===t&&$j("#admin-drawer").length)return $j("#admin-drawer-toggle").click(),!1;if(191===t){if(!n)return $j("#query").focus(),!1;$j("#shortcuts").modal("show")}if(72===t&&$j("#recent-history").modal("show"),i){e=String.fromCharCode(t);if(!$j("li[data-shortcut='"+e+"']").length)return;e=$j("li[data-shortcut='"+e+"'] > a").attr("href"),e=document.location.protocol+"//"+document.location.host+e;window.location.href=e}16===t&&(n=!0),71===t&&(i=!0),17!==t&&91!==t||(a=!0)}}).bind("keyup",function(e){this!==e.target&&(/textarea|select/i.test(e.target.nodeName)||"text"===e.target.type||"true"===$j(e.target).prop("contenteditable"))||(16===(e=e.keyCode||e.which)&&(n=!1),71===e&&(i=!1),17!==e&&91!==e||(a=!1))}),$j(".chzn-select").chosen(),$j(".module").on("click",".pager-next",function(){var e=(e=$j.trim($j(this).closest(".module-wrapper").prev().children("h2").text()))||document.title.substr(0,document.title.length-" - Pardot".length);e+=" Table",googleAnalytics("send","event",e,"Pagination-Next")}),$j(".module").on("click",".pager-prev",function(){var e=(e=$j.trim($j(this).closest(".module-wrapper").prev().children("h2").text()))||document.title.substr(0,document.title.length-" - Pardot".length);e+=" Table",googleAnalytics("send","event",e,"Pagination-Prev")}),$j(".module").on("click",".pager-last",function(){var e=(e=$j.trim($j(this).closest(".module-wrapper").prev().children("h2").text()))||document.title.substr(0,document.title.length-" - Pardot".length);e+=" Table",googleAnalytics("send","event",e,"Pagination-Last")}),$j(".module").on("change",'.pager-form [name="page"]',function(){var e=(e=$j.trim($j(this).closest(".module-wrapper").prev().children("h2").text()))||document.title.substr(0,document.title.length-" - Pardot".length);e+=" Table",googleAnalytics("send","event",e,"Pagination-Input")}),$j(".module").on("change",'[name="pageSize"]',function(){var e=$j.trim($j(this).closest(".module-wrapper").prev().children("h2").text()),t=$j(this).val(),e=e||document.title.substr(0,document.title.length-" - Pardot".length);e+=" Table",googleAnalytics("send","event",e,"Show Rows",t)}),$j(".module").on("focus",'[name="table_filter"]',function(){var e=(e=$j.trim($j(this).closest(".module-wrapper").prev().children("h2").text()))||document.title.substr(0,document.title.length-" - Pardot".length);e+=" Table",googleAnalytics("send","event",e,"Table Filter")}),$j(".module").on("click",".data-table thead a",function(){var e=$j.trim($j(this).closest(".module-wrapper").prev().children("h2").text()),t=$j(this).text(),e=e||document.title.substr(0,document.title.length-" - Pardot".length);e+=" Table",googleAnalytics("send","event",e,"Table Sort",t)}),$j(".module").on("change",'[name="view"]',function(){var e=$j.trim($j(this).closest(".module-wrapper").prev().children("h2").text()),t=$j(":selected",this).text(),e=e||document.title.substr(0,document.title.length-" - Pardot".length);e+=" Table",googleAnalytics("send","event",e,"Table View",t)}),$j("ul.recent").on("click","a",function(){googleAnalytics("send","event","Recent History","Click")})}),$j(function(){$j(".data-table tbody.draggable").sortable({containment:".data-table",axis:"y",opacity:.9,helper:draggableHelper}),$j(".data-table tbody.draggable").disableSelection()}),$j(function(){$j(document).on("click",".data-table tr",function(e){var t,n=$j(e.target);$j(".first.checkbox",this).length&&n.is("td")&&(e=(t=$j(".first.checkbox input",this)).prop("checked",!0),n=$j(this).closest("table"),t.prop("checked",!e),n.trigger("checkboxchange"))});navigator.userAgent.match(/iPad/i),navigator.userAgent.match(/iPhone/i);initDatepicker(),$j("#content").on("change",".date-filter select",function(){var e=$j(this),t=e.closest("form.date-filter"),n=t.find(".custom-range");"7"===e.val()?n.show():(n.hide(),n.find("input").prop("disabled",!0),t.trigger("submit"))}),$j(".text-tiny").each(textTinyResize),$j(document).on("keyup focus",".text-tiny",textTinyResize)}),$j(function(){$j("#password-toggle").change(function(e){e.stopPropagation(),passwordToggle()})}),$j(function(){$j("body").hasClass("ipardot")&&($j(".js-ls-inactive").parent().parent().find(".checklist-dismiss-all a").trigger("click"),$j(".js-fadein").fadeIn("slow"),$j("#content .nav.nav-pills").not(".wizard-content .nav-pills, #admin-drawer .nav-pills, .js-no-action-menu, .internal-actions").removeClass("nav nav-pills").addClass("btn-group action-buttons pull-right").appendTo("#header-actions").find("a").each(function(){$j(this).unwrap().addClass("btn btn-default")}),(3<$j(".action-buttons > a").length||$j(".action-buttons .icon-key").length)&&$j(".action-buttons").append('<a href="#" data-toggle="dropdown" class="btn btn-default dropdown-toggle"><b class="caret"></b></a><ul id="action-drop-menu" class="dropdown-menu" role="menu" aria-labelledby="action-drop-menu"></ul>'),$j(".action-buttons .icon-key").each(function(){$j(this).parent().appendTo("#action-drop-menu").removeClass("btn btn-default").wrap("<li/>")}),4<$j(".action-buttons > a").length&&($j(".action-buttons > a").length,$j(".action-buttons > a:gt(2)").not(".dropdown-toggle").appendTo("#action-drop-menu").removeClass("btn btn-default").wrap("<li/>"),$j(".action-buttons > li").each(function(){var e=$j(this);""===$j.trim(e.html())&&e.remove()})),$j("#sidebar-navigation-toggle").click(function(){$j("body").toggleClass("sidebar-open"),setTimeout(function(){$j(window).resize()},200),$j("body").hasClass("sidebar-open")?Cookies.set("pd-sidebar","sidebar-open",{expires:31556926}):Cookies.set("pd-sidebar","",{expires:31556926})}),$j("#admin-drawer-toggle").unbind().click(function(){$j("#admin-drawer").toggleClass("open")}))}),function(c){c.fn.hoverIntent=function(e,t){function i(e){n=e.pageX,a=e.pageY}var n,a,s,o,l={sensitivity:7,interval:100,timeout:0},l=c.extend(l,t?{over:e,out:t}:e),r=function(e,t){if(t.hoverIntent_t=clearTimeout(t.hoverIntent_t),Math.abs(s-n)+Math.abs(o-a)<l.sensitivity)return c(t).unbind("mousemove",i),t.hoverIntent_s=1,l.over.apply(t,[e]);s=n,o=a,t.hoverIntent_t=setTimeout(function(){r(e,t)},l.interval)},e=function(e){var n=jQuery.extend({},e),a=this;a.hoverIntent_t&&(a.hoverIntent_t=clearTimeout(a.hoverIntent_t)),"mouseenter"==e.type?(s=n.pageX,o=n.pageY,c(a).bind("mousemove",i),1!=a.hoverIntent_s&&(a.hoverIntent_t=setTimeout(function(){r(n,a)},l.interval))):(c(a).unbind("mousemove",i),1==a.hoverIntent_s&&(a.hoverIntent_t=setTimeout(function(){var e,t;e=n,(t=a).hoverIntent_t=clearTimeout(t.hoverIntent_t),t.hoverIntent_s=0,l.out.apply(t,[e])},l.timeout)))};return this.bind("mouseenter",e).bind("mouseleave",e)}}(jQuery),$j.fn.spin=function(n){return this.each(function(){var e=$j(this),t=e.data();t.spinner&&(t.spinner.stop(),delete t.spinner),!1!==n&&(t.spinner=new Spinner($j.extend({color:e.css("color")},n)).spin(this))}),this},window.pardot=window.pardot||{},window.pardot.fetchKeepalive=function(){function n(e){var t,n=new FormData;for(t in e){var a=e[t];"object"==typeof a&&(a=JSON.stringify(a)),n.append(t,a)}return n}return window.fetch&&"keepalive"in new Request("/test")?function(e,t){return window.fetch(e,{method:"POST",body:n(t),keepalive:!0})}:navigator.sendBeacon?function(e,t){try{if(!navigator.sendBeacon(e,n(t)))throw new TypeError("Unable to queue "+e+" via sendBeacon");return Promise.resolve(!0)}catch(e){return Promise.reject(e)}}:function(e,t){return $j.ajax({type:"POST",url:e,data:t,dataType:"json",async:!1})}}(),window.pardot.Modal=function(e){var t,n;this.$modal=$j("#"+e),0!==this.$modal.length?0!==this.$modal.parents(".slds").length?(t=e+"-label",e=e+"-description",this.$modal.attr({"aria-labelledby":t,"aria-describedby":e}),this.$modal.find(".slds-modal__header h2").attr("id",t),this.$modal.find(".slds-modal__content").attr("id",e),n=this.close.bind(this),this.$modal.find('[data-modal-action="close"]').on("click",n),this.$modal.on("keydown",function(e){27===e.which&&n()}),this.$backdrop=this.$modal.siblings(".slds-backdrop"),0===this.$backdrop.length&&(this.$backdrop=$j("<div/>",{class:"slds-backdrop"}).appendTo(this.$modal.parent()))):console.log("Modal must be wrapped by an element with class slds"):console.log("Modal with specified ID not found")},window.pardot.Modal.prototype.open=function(){$j("body").addClass("no-scroll"),this.$backdrop.addClass("slds-backdrop_open"),this.$modal.addClass("slds-fade-in-open").focus()},window.pardot.Modal.prototype.close=function(){$j("body").removeClass("no-scroll"),this.$backdrop.removeClass("slds-backdrop_open"),this.$modal.removeClass("slds-fade-in-open")},window.pardot.createModal=function(e){return new window.pardot.Modal(e)},$j(function(){$j("body").hasClass("ipardot")&&$j("#content span.hml-convert-actions").children().each(function(){$j(this).prependTo("#content #header-actions"),$j(this).addClass("btn btn-primary slds-m-right_x-small")})});