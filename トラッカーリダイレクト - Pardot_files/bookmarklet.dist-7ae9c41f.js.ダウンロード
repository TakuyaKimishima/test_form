!function(){"use strict";var e;e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,"function"==typeof Symbol&&Symbol.asyncIterator&&(t.prototype[Symbol.asyncIterator]=function(){return this}),t.prototype.next=function(e){return this._invoke("next",e)},t.prototype.throw=function(e){return this._invoke("throw",e)},t.prototype.return=function(e){return this._invoke("return",e)};function u(e){this.value=e}function t(i){var a,o;function s(e,t){try{var n=i[e](t),r=n.value;r instanceof u?Promise.resolve(r.value).then(function(e){s("next",e)},function(e){s("throw",e)}):c(n.done?"return":"normal",n.value)}catch(e){c("throw",e)}}function c(e,t){switch(e){case"return":a.resolve({value:t,done:!0});break;case"throw":a.reject(t);break;default:a.resolve({value:t,done:!1})}(a=a.next)?s(a.key,a.arg):o=null}this._invoke=function(n,r){return new Promise(function(e,t){t={key:n,arg:r,resolve:e,reject:t,next:null};o?o=o.next=t:(a=o=t,s(n,r))})},"function"!=typeof i.return&&(this.return=void 0)}var i=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},n=function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e};function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},o=(n(s,[{key:"addListener",value:function(e,t){this.listeners.has(e)||this.listeners.set(e,[]),this.listeners.get(e).push(t)}},{key:"removeListener",value:function(e,r){var t,n=this.listeners.get(e);return!!(n&&n.length&&-1<(t=n.reduce(function(e,t,n){return isFunction(t)&&t===r?e=n:e},-1)))&&(n.splice(t,1),this.listeners.set(e,n),!0)}},{key:"emit",value:function(e){for(var t=arguments.length,n=Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e=this.listeners.get(e);return!(!e||!e.length)&&(e.forEach(function(e){e.apply(void 0,n)}),!0)}}]),s);function s(){i(this,s),this.listeners=new Map}var c=1e3/60,d=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(l,o),n(l,[{key:"_trackEptDeviation",value:function(e,t){this._tracking&&performance.mark(t||"deviation-"+e.type)}},{key:"start",value:function(e){var t=this;!0===(e=e||{}).resetOnClick&&document.addEventListener("click",function(){t._start()},!0),this._start()}},{key:"_start",value:function(){window&&(this._tracking&&this.trackEptDeviation(event,"unfinished"),window.cancelAnimationFrame(this.requestAnimationFrameId),this._init(),this._tracking=!0,this.emit("start-recording"),this._onRAF())}},{key:"stop",value:function(e){window&&(window.cancelAnimationFrame(this.requestAnimationFrameId),this._tracking&&(this._tracking=!1,this.emit("end-recording",e)))}},{key:"_uuidv4",value:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})}},{key:"_init",value:function(){this.frameCounter=0,this.requestAnimationFrameId=0,this.processingPeriods=[],this.requestId=this._uuidv4();var e=performance.now();this.lastClickTS=e,this.lastRAFTS=e,this.eptCandidateTS=e,this.xhrRequestIds=[]}},{key:"_onXhrChange",value:function(e){this._tracking&&(e?this.openXhrs++:(this.openXhrs--,this._onRAF(performance.now(),!0)))}},{key:"_onIFrameLoaded",value:function(){this._tracking&&(this.openFrames--,this._onRAF(performance.now(),!0))}},{key:"_getEnvInfo",value:function(){var e,t;return this.envInfo||(t=navigator.userAgent.toLowerCase(),t=(e=/(edge)[ \/]([\w.]+)/.exec(t)||/(chrome)[ \/]([\w.]+)/.exec(t)||/(webkit)[ \/]([\w.]+)/.exec(t)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(t)||/(msie) ([\w.]+)/.exec(t)||t.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(t)||[])[2]||"0","webkit"===(e=e[1]||"")&&(e="safari"),this.envInfo={browser:e,version:t,osName:navigator.platform,language:navigator.language}),this.envInfo}},{key:"_onRAF",value:function(e,t){if(t||this.frameCounter++,e-2.1*c>this.lastRAFTS)this.processingPeriods.push({start:this.lastRAFTS,end:e}),this.eptCandidateTS=e;else if(3e3<e-this.eptCandidateTS&&this._isIdle())return void this._onFinish();t||(this.lastRAFTS=e,this.requestAnimationFrameId=window.requestAnimationFrame(this._onRAF.bind(this)))}},{key:"_onFinish",value:function(){if(window){var e=Math.max(Math.round(this.eptCandidateTS-this.lastClickTS),0),t=Math.max(Math.round(this.eptCandidateTS-this.lastClickTS-(this.frameCounter-180)*c),0);if(!t){for(var n=0,r=0;r<this.processingPeriods.length;r++){var i=this.processingPeriods[r];n+=i.end-i.start}t=Math.floor(e-n)}var a=this._getEnvInfo();this.stop({uri:window.location.href,uiRequestId:this.requestId,ept:e,bpt:t,browser:a.browser,browserVersion:a.version,osName:a.osName,language:a.language,start:this.lastClickTS,end:this.eptCandidateTS,processingPeriods:this.processingPeriods})}}},{key:"_isIdle",value:function(){return window.$A&&$A.clientService&&$A.clientService.$idle$?$A.clientService.$idle$():this.openXhrs<=0&&this.openFrames<=0}}]),l);function l(){i(this,l);var e=a(this,(l.__proto__||Object.getPrototypeOf(l)).call(this));e._init(),e.openXhrs=0;var t,o=e;return XMLHttpRequest,t=XMLHttpRequest.prototype.send,XMLHttpRequest.prototype.send=function(){o._onXhrChange(!0),this.addEventListener("readystatechange",function(){4===this.readyState&&o._onXhrChange(!1)},!1),t.apply(this,arguments)},window.addEventListener("load",function(){var e=document.getElementsByTagName("IFRAME");o.openFrames=e.length;for(var t=0;t<e.length;t++){var n,r,i=e[t],a=i.contentWindow||i.contentDocument;a.document&&(a=a.document),"complete"===a.readyState?(n=i.src.trim(),"about:blank"===a.location.href&&"about:blank"!==n&&""!==n?(i.addEventListener("load",o._onIFrameLoaded),r=setInterval(function(){a.location.src||(clearInterval(r),o._onIFrameLoaded())},100)):o.openFrames--):i.addEventListener("load",o._onIFrameLoaded)}}),window.addEventListener("error",function(e){o._trackEptDeviation(e)},!0),document.addEventListener("click",function(e){o._tracking&&(-1<["LINK","BUTTON"].indexOf(e.target.tagName)||"INPUT"===e.target.tagName&&"button"===e.target.type)&&o._trackEptDeviation(e)},!1),document.addEventListener("input",function(e){o._trackEptDeviation(e)},!1),window.addEventListener("scroll",function(e){o._trackEptDeviation(e)},!0),document.addEventListener("visibilitychange",function(){document.hidden?(o._trackEptDeviation(event,"backgroundTab_start"),o._trackingBackgroundTab=!0):(o._trackEptDeviation(event,"backgroundTab_end"),performance.measure("deviation-backgroundTab",o._trackingBackgroundTab?"backgroundTab_start":void 0,"backgroundTab_end"),o._trackingBackgroundTab=!1)}),e}function h(){for(var e=arguments,t={all:[],keys:e},n=0;n<e.length;n++)t[e[n]]=n,t.all[n]=n;return t}h.parse=function(e,t){for(var n=0;n<e.keys.length;n++)if(e.keys[n]===t)return e.all[n]};var p={EntryTypeEnum:h("navigation","paint","mark","measure","resource"),Resource:{InitiatorTypeEnum:h("xmlhttprequest","iframe","frame")}},f=(n(m,[{key:"_initLogs",value:function(){this.performanceTimeline=[]}},{key:"_onStartRecording",value:function(){}},{key:"_onEndRecording",value:function(e){this._recordResourceTimings(e)}},{key:"_markNameSerialize",value:function(e,t){return JSON.stringify({name:e,data:t})}},{key:"_markNameDeserialize",value:function(e){var t;"{"===e.name.charAt(0)&&"}"===e.name.charAt(e.name.length-1)&&(t=JSON.parse(e.name),e.data=t.data,e.name=t.name)}},{key:"mark",value:function(e,t){performance.mark(this._markNameSerialize(e,t))}},{key:"markStart",value:function(e){performance.mark(e+"_start")}},{key:"markEnd",value:function(e,t){performance.mark(e+"_end"),performance.measure(this._markNameSerialize(e,t),e+"_start",e+"_end")}},{key:"markBootstrapEnd",value:function(e){this._calcBootstrap=!1;var t="bootstrap";performance.mark(t+"_end"),performance.measure(this._markPlusData(t,e),"navigationStart",t+"_end")}},{key:"benchmark",value:function(t){var n=this;return function(){n.markStart(t.name);var e=t.apply(this,arguments);return n.markEnd(t.name),e}}},{key:"_recordResourceTimings",value:function(r){var i=this;if(r)if(r.performanceEntries=[],void 0!==performance){var a=performance.getEntries();if(void 0===a||a.length<=0)r.performanceEntries.push("Error: no resource type performance data");else{for(var e,t=null,n=0,o=0,s=a[0].startTime,c=0;c<a.length;c++){var u;(function(e){var t=a[e],e=h.parse(p.EntryTypeEnum,t.entryType);if(void 0===e)return;if(e===p.EntryTypeEnum.resource&&void 0===h.parse(p.Resource.InitiatorTypeEnum,t.initiatorType))return i._calcBootstrap&&(o=Math.max(o,t.startTime+t.duration));if(t.startTime+t.duration<r.start)return;i._calcBootstrap||e===p.EntryTypeEnum.measure&&"bootstrap"===t.name&&(o=t.duration);var n=i._summarizeResourcePerfInfo(t);if(-1!==[p.EntryTypeEnum.mark,p.EntryTypeEnum.measure].indexOf(e)&&(i._markNameDeserialize(n),n.name.startsWith("deviation"))){if("scroll"===n.name.substring(10))return l(n);if(d(n),u=r.performanceEntries.find(function(e){return"mark"===e.entryType&&e.name===n.name}))return u.count++,u.lastTime=n.startTime;n.count=1}r.performanceEntries.push(n)})(c)}l(null),this._calcBootstrap&&(e=this._summarizeResourcePerfInfo({duration:o,entryType:"measure",name:"bootstrap",startTime:s}),r.performanceEntries.push(e)),r.bootstrapTimeMs=o-s,this.performanceTimeline.push(r),this.send()}}else r.performanceEntries.push("Error: performance NOT supported");function d(e){var t=e.name.substring(10);r.deviation||(r.deviation={types:[],duration:0}),-1===r.deviation.types.indexOf(t)&&(r.deviation.types[r.deviation.types.length]=t),e.duration&&(r.deviation.duration+=e.duration)}function l(e){!(t=t&&(!e||250<e.startTime-t.startTime?(n?(t.duration=t.startTime-n,t.startTime=n):t.duration=200,t.entryType="measure",d(t),r.performanceEntries.push(t),null):e))&&e&&(n=e.startTime,t=e)}}},{key:"_summarizeResourcePerfInfo",value:function(e){return{name:e.name,entryType:e.entryType,initiatorType:e.initiatorType,startTime:e.startTime,duration:e.duration,size:e.encodedBodySize||e.decodedBodySize,fetchStart:e.fetchStart,requestStart:e.requestStart,dns:e.domainLookupEnd-e.domainLookupStart,tcp:e.connectEnd-e.connectStart,ttfb:e.responseStart-e.startTime,transfer:e.responseEnd-e.responseStart,transferSize:e.transferSize}}},{key:"send",value:function(){if(this._sendHandlers.length&&0<this.performanceTimeline.length){for(var e=0;e<this._sendHandlers.length;e++)this._sendHandlers[e](this.performanceTimeline);this._initLogs()}}},{key:"addSendHandler",value:function(e){this._sendHandlers.push(e)}}]),m);function m(e){i(this,m),this._sendHandlers=[],this._initLogs(),this._calcBootstrap=!0;var n={"start-recording":this._onStartRecording.bind(this),"end-recording":this._onEndRecording.bind(this)};Object.keys(n).forEach(function(t){e.addListener(t,function(e){n[t](e)})});var t=this;window.addEventListener("beforeunload",function(e){t.send()})}var g={en:{legend:"Top bar: XHR processing, Bottom graph: rendering",status:"Status",toggleResults:"Toggle Results"}},v="",k=(n(y,null,[{key:"getLocale",value:function(){return v=v||(navigator.language||navigator.browserLanguage||(navigator.languages||["en"])[0])}},{key:"setLocale",value:function(e){v=e,y.init()}},{key:"_init",value:function(){var e=this.getLocale();!(y.i18n=g[e])&&2<e.length&&(y.i18n=g[e.substring(0,2)]),y.i18n||(y.i18n=g[0])}}]),y);function y(){throw i(this,y),new Error("Cannot construct singleton")}k.type="localization",k._init();var b="\n.bpt-sticker {\n  position: fixed;\n  top: 5px;\n  right: 5px;\n  z-index: 1000;\n  border: 1px solid rgba(150,150,150,0.3);\n  border-radius: 3px;\n  box-shadow: 0 0 3px 1px rgba(0,0,0,.07);\n  background: #F7F7F7;\n}\n\n.bpt-sticker .perf-sticker-hide {\n  display: none;\n}\n.bpt-sticker .perf-sticker-show {\n  display: block;\n}\n.bpt-sticker .perf-sticker-toggle {\n  text-decoration: none !important;\n}\n.bpt-sticker .font-waiting {\n  color: grey;\n}\n.bpt-sticker .font-ready {\n  color: blue;\n}\n\n.bpt-sticker header {\n  padding: 5px;\n  border-bottom: 1px solid rgba(150,150,150,0.3);\n}\n\n.bpt-sticker .metrics {\n  margin: 0;\n  padding: 5px;\n  list-style: none;\n  border-bottom: 1px solid rgba(150,150,150,0.3);\n}\n\n.bpt-sticker .timeline {\n  min-width: 150px;\n  height: 40px;\n  list-style: none;\n  margin: 3px;\n  padding: 0;\n  background-color: #02A1E0;\n  position: relative;\n}\n\n.bpt-sticker .tick {\n  width: 1px;\n  height: 80%;\n  float: left;\n  background-color: #16325C;\n}\n\nli.xhr {\n  position: absolute;\n  background: yellow;\n  height: 2px;\n}\n\n.bpt-sticker .tick.processing {\n  height: 20%;\n}\n\n@keyframes changeColor {\n\t0% {\n\t\tbackground-color: #F44336;\n\t}\n\t100% {\n\t\tbackground-color: #EE7B72;\n\t}\n}\n\n.bpt-sticker .icon-record {\n  width: 15px;\n  height: 15px;\n  margin-left: 10px;\n  display: block;\n  float: right;\n  border-radius: 15px;\n  background-color: #C5C5C5;\n}\n\n.bpt-sticker .icon-record.recording {\n  animation: changeColor .7s infinite;\n}\n";function w(e,t){var n=1<arguments.length&&void 0!==t&&t;if(e<1)return["<li class='tick' style='height="+(20+60*e)+"%'></li>"];for(var r=[],i=0;i<e;i++)n?r.push("<li class='tick processing'></li>"):r.push("<li class='tick'></li>");return r}var _,x=(n(T,[{key:"_onStartRecording",value:function(){this.isRecording=!0,this.ept=0,this.bpt=0,this.timeline=null}},{key:"_onEndRecording",value:function(e){this.isRecording=!1,this.ept=e.ept||0,this.bpt=e.bpt||0,this.timeline={start:e.start,end:e.end,processingPeriods:e.processingPeriods}}},{key:"_render",value:function(){var t=this,e="icon-record";e+=this.isRecording?" recording":"";var n="";if(this.timeline){var i=[],a=(this.timeline.end-this.timeline.start)/150,r=(this.timeline.processingPeriods[0].start-this.timeline.start)/a,i=i.concat(w(r));this.timeline.processingPeriods.forEach(function(e,t,n){var r=(e.end-e.start)/a;i=i.concat(w(r,!0)),t!==n.length-1&&(e=(n[t+1].start-e.end)/a,i=i.concat(w(e)))});for(var o=window.performance.getEntries().filter(function(e){return"xmlhttprequest"===e.initiatorType}).filter(function(e){return t.timeline.start<e.startTime&&t.timeline.end>e.startTime+e.duration}).sort(function(e,t){return e.startTime<t.startTime}).reduce(function(e,t){if(0===e.length)return[[t]];for(var n=0;n<e.length;n++){var r=e[n],i=r[r.length-1];if(t.startTime<i.startTime+i.duration)return r.push(t),e}return e.push([t]),e},[]),s=0;s<o.length;s++)for(var c=0;c<o[s].length;c++){var u=o[s][c],d=4*s+2,l=(u.startTime-this.timeline.start)/a,u=u.duration/a;i.push("<li class='xhr' style='top:"+d+"px; left:"+l+"px; width:"+u+"px;'></li>")}n='<ul class="timeline" title="'+k.i18n.legend+'">'+i.join("")+"</ul>"}n='\n\t  <span class="perf-sticker-hide" id="bptStickerArea">\n        <header>'+k.i18n.status+'<span class="'+e+'"></span>\n        </header>\n        <ul class="metrics">\n          <li><b>EPT</b> '+this.ept+"ms</li>\n          <li><b>BPT</b> "+this.bpt+"ms</li>\n        </ul>\n      "+n+'\n      </span>\n\t  <a href="#" title="'+k.i18n.toggleResults+'" class="perf-sticker-toggle" onclick="this.parentNode.showPerfResults()">\n\t    &#x23f1;\n      </a>\n    ';this.stickerContainer.innerHTML=n,this.stickerContainer.showPerfResults=function(){var e=document.getElementById("bptStickerArea");e.className="perf-sticker-hide"===e.className?"perf-sticker-show":"perf-sticker-hide"}}}]),T);function T(e){var n=this;i(this,T),this.tracker=e,this.isRecording=!1,this.ept=0,this.bpt=0,this.timeline=null,this.stickerContainer=document.createElement("div"),this.stickerContainer.className="bpt-sticker",document.body.appendChild(this.stickerContainer);e=document.createElement("style");e.innerText=b,document.body.appendChild(e);var r={"start-recording":this._onStartRecording.bind(this),"end-recording":this._onEndRecording.bind(this)};Object.keys(r).forEach(function(t){n.tracker.addListener(t,function(e){r[t](e),n._render()})}),this._render()}window.pardot=window.pardot||{},window.pardot.metrics=window.pardot.metrics||{xhrRequestIds:[],sendMetrics:function(e){var t;e&&(e[e.length-1].xhrRequestIds=window.pardot.metrics.xhrRequestIds,t=e,e=JSON.stringify(t),$j.post("/metrics/log",{_csrf_token:window._csrf_token,metricsInfo:e}),window.pardot.metrics.xhrRequestIds=[])}},window.pardot.metrics._initedXHRheaders||(XMLHttpRequest,_=XMLHttpRequest.prototype.send,XMLHttpRequest.prototype.send=function(){var e=window.bptTracker._uuidv4();this.setRequestHeader("X-SFDC-Request-Id",e),this.setRequestHeader("uri",window.bptTracker.requestId),this.setRequestHeader("client","browser"),_.apply(this,arguments),window.pardot.metrics.xhrRequestIds.push(e)},window.pardot.metrics._initedXHRheaders=!0);var E,S,n=void 0!==window.jasmine;function R(){var e;return void 0===document.currentScript&&(document.currentScript=(e=document.getElementsByTagName("script"))[e.length-1]),document.currentScript}window.bptTracker||(E=new d,(S=R().getAttribute("showSticker"))&&"false"!==S&&(E.showSticker=!0),window.bptTracker=E),function(){if(!window.metricsService){var e=new f(window.bptTracker),t=R().getAttribute("handlerObject"),n=R().getAttribute("handlerFunction");if(t){for(var r=t.split("."),i=void 0,a=0;a<r.length;a++){var o=r[a];if(!i){if("this"===o){i=this;continue}if(i=window,"window"===o)continue}i=i[o]}t=i}n&&(n=(t||this)[n],e.addSendHandler(function(e){n(e)})),window.metricsService=e}}(),window.bptTracker.start(),(window.bptTracker.showSticker||n)&&window.addEventListener("load",function(e){var t;window.bptSticker||(t=new x(window.bptTracker),(window.bptSticker=t)._render())})}();